{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\ufffd\ufffd#\u0000 \u0000W\u0000e\u0000l\u0000c\u0000o\u0000m\u0000e\u0000 \u0000t\u0000o\u0000 \u0000a\u0000u\u0000X\u0000p\u0000l\u0000o\u0000i\u0000t\u0000 \u0000W\u0000r\u0000i\u0000t\u0000e\u0000s\u0000 \u0000 \u0000","title":"Home"},{"location":"writeups/wireguard-proxmox-container/","text":"\ud83d\udd10 Homelab Remote Access using Proxmox + WireGuard (LXC Attempt) Portfolio documentation: objective, architecture, configs, troubleshooting, root-cause, and final decision to move WG server from LXC \u2192 Debian VM. Objective Secure remote access to my homelab using WireGuard. Environment Proxmox Host (static): 192.168.1.10 Debian VPN server (LXC, attempt 1): 192.168.1.20 Router/Gateway: 192.168.1.1 LAN: 192.168.1.0/24 WireGuard subnet: 10.8.0.0/24 Port forward: UDP 51820 \u2192 192.168.1.20 Public IPv4 present; PVE firewall disabled for tests. \ud83c\udfd7 Architecture \u2013 Proxmox LXC WireGuard Setup Here is the network flow for my initial WireGuard setup using a Debian LXC on Proxmox: Key Configs (LXC Attempt) Server /etc/wireguard/wg0.conf (minimal, IPv4): [Interface] Address = 10.8.0.1/24 ListenPort = 51820 PrivateKey = PostUp = iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE PostDown = iptables -t nat -D POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE [Peer] # au-phone PublicKey = AllowedIPs = 10.8.0.2/32 PersistentKeepalive = 25 [Peer] # au-worklaptop PublicKey = AllowedIPs = 10.8.0.3/32 PersistentKeepalive = 25 Client template (Android/Laptop): [Interface] PrivateKey = Address = 10.8.0.2/32 DNS = 1.1.1.1 [Peer] PublicKey = Endpoint = :51820 AllowedIPs = 0.0.0.0/0, ::/0 PersistentKeepalive = 25 Troubleshooting Highlights Verified: ss -lunp | grep 51820 (WG listening), sysctl net.ipv4.ip_forward=1, MASQUERADE present, router port forward correct, public IPv4 present, PVE firewall disabled. tcpdump path checks: Host vmbr0: check UDP/51820 arrives from WAN. Host veth104i0: check forwarding into the CT. Inside LXC eth0: check packets inside CT. Outcome: no reliable handshake at the CT boundary \u2192 containerization/kernel/capability constraints, not WG config. Root Cause Running a WG server inside LXC adds kernel/capability hurdles (module loading, /dev/net/tun, CAP_NET_ADMIN, AppArmor/cgroup constraints, bridge/veth path). Result: handshakes fail despite correct configs. Decision Migrate WG server to a Debian VM on Proxmox (full kernel control, simpler routing/NAT, production-like). Future (Design Only) Build Debian VM for WG; move port forward to VM. After NIC (Intel i350-T2/T4) install: introduce pfSense as edge firewall/router; add VLANs, DNS control, reverse proxy.","title":"\ud83d\udd10 Homelab Remote Access using Proxmox + WireGuard (LXC Attempt)"},{"location":"writeups/wireguard-proxmox-container/#homelab-remote-access-using-proxmox-wireguard-lxc-attempt","text":"Portfolio documentation: objective, architecture, configs, troubleshooting, root-cause, and final decision to move WG server from LXC \u2192 Debian VM.","title":"\ud83d\udd10 Homelab Remote Access using Proxmox + WireGuard (LXC Attempt)"},{"location":"writeups/wireguard-proxmox-container/#objective","text":"Secure remote access to my homelab using WireGuard.","title":"Objective"},{"location":"writeups/wireguard-proxmox-container/#environment","text":"Proxmox Host (static): 192.168.1.10 Debian VPN server (LXC, attempt 1): 192.168.1.20 Router/Gateway: 192.168.1.1 LAN: 192.168.1.0/24 WireGuard subnet: 10.8.0.0/24 Port forward: UDP 51820 \u2192 192.168.1.20 Public IPv4 present; PVE firewall disabled for tests.","title":"Environment"},{"location":"writeups/wireguard-proxmox-container/#architecture-proxmox-lxc-wireguard-setup","text":"Here is the network flow for my initial WireGuard setup using a Debian LXC on Proxmox:","title":"\ud83c\udfd7 Architecture \u2013 Proxmox LXC WireGuard Setup"},{"location":"writeups/wireguard-proxmox-container/#key-configs-lxc-attempt","text":"Server /etc/wireguard/wg0.conf (minimal, IPv4): [Interface] Address = 10.8.0.1/24 ListenPort = 51820 PrivateKey = PostUp = iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE PostDown = iptables -t nat -D POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE [Peer] # au-phone PublicKey = AllowedIPs = 10.8.0.2/32 PersistentKeepalive = 25 [Peer] # au-worklaptop PublicKey = AllowedIPs = 10.8.0.3/32 PersistentKeepalive = 25","title":"Key Configs (LXC Attempt)"},{"location":"writeups/wireguard-proxmox-container/#client-template-androidlaptop","text":"[Interface] PrivateKey = Address = 10.8.0.2/32 DNS = 1.1.1.1 [Peer] PublicKey = Endpoint = :51820 AllowedIPs = 0.0.0.0/0, ::/0 PersistentKeepalive = 25","title":"Client template (Android/Laptop):"},{"location":"writeups/wireguard-proxmox-container/#troubleshooting-highlights","text":"Verified: ss -lunp | grep 51820 (WG listening), sysctl net.ipv4.ip_forward=1, MASQUERADE present, router port forward correct, public IPv4 present, PVE firewall disabled. tcpdump path checks: Host vmbr0: check UDP/51820 arrives from WAN. Host veth104i0: check forwarding into the CT. Inside LXC eth0: check packets inside CT. Outcome: no reliable handshake at the CT boundary \u2192 containerization/kernel/capability constraints, not WG config.","title":"Troubleshooting Highlights"},{"location":"writeups/wireguard-proxmox-container/#root-cause","text":"Running a WG server inside LXC adds kernel/capability hurdles (module loading, /dev/net/tun, CAP_NET_ADMIN, AppArmor/cgroup constraints, bridge/veth path). Result: handshakes fail despite correct configs.","title":"Root Cause"},{"location":"writeups/wireguard-proxmox-container/#decision","text":"Migrate WG server to a Debian VM on Proxmox (full kernel control, simpler routing/NAT, production-like).","title":"Decision"},{"location":"writeups/wireguard-proxmox-container/#future-design-only","text":"Build Debian VM for WG; move port forward to VM. After NIC (Intel i350-T2/T4) install: introduce pfSense as edge firewall/router; add VLANs, DNS control, reverse proxy.","title":"Future (Design Only)"}]}